## 現在動作しているもの
- **口腔衛生状態（舌苔スコア/TCI）判定ロジック・UIパターンを刷新（6ブロック・TCI計算・50%以上で異常）し、他検査と同様のリアルタイム判定・UI/UXパターンを確立**
- 口腔機能検査・全身機能評価・管理計画書作成の主要UI/機能（Next.js 15 + Supabase構成）
- **患者新規登録・編集画面（/patients/new, /patients/[patientId]/edit）がPatientForm.tsxでUI/UX・バリデーション・アクセシビリティ共通化された状態で安定動作**
- **患者編集画面はSupabaseから初期値を取得し、編集・保存（update）が可能**
- **hooks/useUpdatePatient.tsによるupdateロジックの共通化**
- **患者新規登録時、patients.idを取得し、検査登録画面へidをパスパラメータで遷移するフローが安定動作**
- **oral_function_examのinsert時、必ずpatients.id（パスパラメータ）をpatient_idとして保存し、外部キー制約違反（Key (patient_id) is not present in table "patients"）が発生しない**
- **検査データ保存後、Supabaseのinsert直後に.select().single()で新規idを取得し、検査結果詳細画面へ遷移するフローが安定動作**
- **lib/oralFunctionAssessmentJudge.tsのjudgeBitingForce関数で、フィルタ無し:500N以上、フィルタあり:350N以上で正常判定となるよう修正。不等号バグも解消**
- 管理計画書作成ページの全体ラッパー・患者情報表示・フォーム本体をshadcn/uiのCardで統一
- ...（従来の動作も維持）

## 今後実装すべきもの
- **患者編集画面の更なるUX改善・バリデーション強化・エラーハンドリングの拡充**
- 管理計画書作成ページのさらなるUX改善・バリデーション・保存/プレビュー連携
- 口腔機能管理計画セクションのUIリファイン・保存機能
- 必要に応じてAPI連携・保存・印刷連携の強化
- 他セクションのUI/UX最適化
- ドキュメント・学びの随時反映

## 現在のステータス
- **口腔衛生状態（TCI）判定の新パターン（6ブロック・TCI計算・50%以上で異常）が安定動作。他検査と同様のリアルタイム判定・UI/UXパターンを再利用可能**
- **患者新規登録→検査登録のid受け渡し・外部キー制約違反の解消・保存後の詳細画面遷移が一貫して安定動作**
- **咬合力判定条件（フィルタ有無で基準値分岐）のバグが解消され、現場運用仕様に準拠**
- ...（従来のステータスも維持）

## 既知の課題・懸念点
- **患者編集画面のバリデーション・UX改善・エラーハンドリング強化**
- 管理計画書作成ページのバリデーション・保存/プレビュー連携
- 口腔機能管理計画セクションのさらなるUX改善
- API連携・保存・印刷連携の強化
- 他セクションのUI/UX最適化

## プロジェクト意思決定の変遷
- **口腔衛生状態（TCI）判定の新パターン（6ブロック・TCI計算・50%以上で異常）を確立。他検査と同様のリアルタイム判定・UI/UXパターンを再利用可能**
- **患者新規登録→検査登録のid受け渡し・外部キー制約違反の解消・保存後の詳細画面遷移のパターンを確立**
- **咬合力判定条件（フィルタ有無で基準値分岐）のバグ解消・仕様明示**
- ...（従来の意思決定も維持）
