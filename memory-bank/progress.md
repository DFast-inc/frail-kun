## 現在動作しているもの
- 口腔機能検査・全身機能評価・管理計画書作成の主要UI/機能（Next.js 15 + Supabase構成）
- 患者新規登録フォームでage（年齢）入力欄を廃止し、birthday（生年月日）入力欄（任意）を追加
- APIロジックでageを廃止し、birthdayを送信
- 患者一覧・詳細画面でageカラムを廃止し、birthdayから年齢を自動計算して表示（未入力時は「-」表示）
- 型定義・バリデーション・UI/UXを全てage廃止・birthday基準に統一
- /examinations/detail/[id]/management-plan-edit ページでの管理計画書作成フォーム（shadcn/ui・Tailwind CSSベース）
- 管理計画書作成ページに「印刷」ボタンを追加し、印刷ページ（/examinations/detail/[id]/management-plan-edit/print）へ遷移可能
- 印刷ページに「戻る」ボタンを追加し、作成ページへ遷移可能
- JSX構造・styleタグの不整合を修正し、エラーのない状態に
- 患者情報・検査日などのSupabase連携表示
- 管理計画書印刷ページ（/examinations/detail/[id]/print）のA4最適化レイアウト
- 体組成測定・管理計画書印刷・詳細表示などの段階的なUIリファイン
- **全身の状態セクションを、ご指定のUI（チェックボックス・セレクト・数値入力・詳細テキスト＋身長体重BMI）で1箇所に統一。重複UIを排除し、state設計を刷新。**
- **全身の状態の入力内容をlocalStorageに保存し、プリントページで正しく反映されるように連携。複数選択や詳細入力も正しく展開。**
- **患者一覧画面をapp/patients/page.tsxに統一し、トップページ（/）から/patientsへの自動リダイレクトを実装**
- **PatientsList.tsxのUIを改善し、「操作」列を削除、行クリックで詳細ページ遷移に統一**

## 今後実装すべきもの
- 管理計画書作成ページのさらなるUX改善・バリデーション・保存/プレビュー連携
- 口腔機能管理計画セクションのUIリファイン・保存機能
- API連携・保存・印刷連携の強化
- 他セクションのUI/UX最適化
- ドキュメント・学びの随時反映

## 現在のステータス
- 管理計画書作成・印刷・詳細表示の主要UIがNext.js 15 + Supabase構成で安定動作
- 患者基本情報の年齢は入力させず、birthday（生年月日）から自動計算して表示する方針に統一
- UI/UXは現場運用・可読性・操作性重視でリファイン中
- **全身の状態セクションのUI・state・保存・プリント連携が現場運用に即した形で安定動作**
- 印刷連携・画面遷移も強化され、運用性が向上
- コード・ドキュメントは常に最新状態を維持
- **患者一覧画面のルーティング・UI/UXが統一され、トップページからの導線も一貫性が向上**

## 既知の課題・懸念点
- 管理計画書作成ページのバリデーション・保存/プレビュー連携
- 口腔機能管理計画セクションのさらなるUX改善
- API連携・保存・印刷連携の強化
- 他セクションのUI/UX最適化

## プロジェクト意思決定の変遷
- v0の仮実装から本番運用を見据えた清書へ
- ドキュメント・チュートリアル重視の実装方針
- DB設計・リレーション・DDL反映・テストデータ投入をSupabase MCPツールで自動化
- UI/UX・バリデーションは現場運用とDB制約の両立を重視
- 患者基本情報の年齢は入力させず、birthday（生年月日）から自動計算して表示する方針に統一
- paramsのPromise対応・"use client"ディレクティブの適用による最新Next.js仕様への追従
- shadcn/ui, Tailwind CSS, Next.js 15 App Router構成を積極活用
- **全身の状態セクションのUI刷新・重複排除・localStorage保存・プリント連携のパターンを確立**
- **患者一覧画面はapp/patients/page.tsxに統一し、トップページ（/）は/patientsへリダイレクトする構成に決定**
- **PatientsList.tsxは行クリックで詳細遷移、操作列廃止のUI/UXに統一**
